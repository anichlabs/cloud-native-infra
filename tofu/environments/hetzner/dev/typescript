Script started on 2025-08-29 12:07:07+01:00 [TERM="xterm-256color" TTY="/dev/pts/1" COLUMNS="91" LINES="46"]
[1m[7m%[27m[1m[0m                                                                                           ]2;chrisanich@anichlabs:/lab/px/cloud-native-infra/tofu/environments/hetzner/dev]1;..s/hetzner/dev]7;file:///lab/px/cloud-native-infra/tofu/environments/hetzner/dev\[0m[27m[24m[J[01;32m‚ûú  [36mdev[00m [K[?1h=[?2004h[0m[27m[24m[J[01;32m‚ûú  [36mdev[00m [01;34mgit:([31mmain[34m) [33m‚úó[00m [Ksscripts[?1l>[?2004l
]2;cd /lab/px/cloud-native-infra/scripts/]1;scripts[1m[7m%[27m[1m[0m                                                                                           ]2;chrisanich@anichlabs:/lab/px/cloud-native-infra/scripts]1;..infra/scripts]7;file:///lab/px/cloud-native-infra/scripts\[0m[27m[24m[J[01;32m‚ûú  [36mscripts[00m [01;34mgit:([31mmain[34m) [33m‚úó[00m [K[?1h=[?2004hcclear[?1l>[?2004l
]2;clear]1;clear[H[2J[3J[1m[7m%[27m[1m[0m                                                                                           ]2;chrisanich@anichlabs:/lab/px/cloud-native-infra/scripts]1;..infra/scripts]7;file:///lab/px/cloud-native-infra/scripts\[0m[27m[24m[J[01;32m‚ûú  [36mscripts[00m [01;34mgit:([31mmain[34m) [33m‚úó[00m [K[?1h=[?2004hlls[?1l>[?2004l
]2;ls --color=tty]1;ls[0m[01;32mclean.sh[0m  [01;32mload-secrets.sh[0m
[1m[7m%[27m[1m[0m                                                                                           ]2;chrisanich@anichlabs:/lab/px/cloud-native-infra/scripts]1;..infra/scripts]7;file:///lab/px/cloud-native-infra/scripts\[0m[27m[24m[J[01;32m‚ûú  [36mscripts[00m [01;34mgit:([31mmain[34m) [33m‚úó[00m [K[?1h=[?2004hc a nnano [7mload-secrets.sh[27m[15D[27ml[27mo[27ma[27md[27m-[27ms[27me[27mc[27mr[27me[27mt[27ms[27m.[27ms[27mh[?1l>[?2004l
]2;nano load-secrets.sh]1;nano[?2004h[?1049h[22;0;0t[1;46r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[44;39H(B[0;7m[ Reading... ](B[m[44;38H(B[0;7m[ Read 27 lines ](B[m[H(B[0;7m  GNU nano 7.2                          load-secrets.sh                                    [1;90H(B[m[45d(B[0;7m^G(B[m Help[45;16H(B[0;7m^O(B[m Write Out   (B[0;7m^W(B[m Where Is    (B[0;7m^K(B[m Cut[45;61H(B[0;7m^T(B[m Execute     (B[0;7m^C(B[m Location[46d(B[0;7m^X(B[m Exit[46;16H(B[0;7m^R(B[m Read File   (B[0;7m^\(B[m Replace     (B[0;7m^U(B[m Paste[61G(B[0;7m^J(B[m Justify     (B[0;7m^/(B[m Go To Line[2d[36m#!/usr/bin/env bash[3d(B[0;1m[34mset[39m(B[m -euo pipefail[4dtrap (B[0;1m[33m'echo "Error on line $LINENO"; exit 1'[39m(B[m ERR[6dENV[32m=(B[0;1m[33m"${1:-dev}"[7d[39m(B[mROOT[32m=(B[0;1m[33m"$(cd "(B[0m[32m$([39m(B[mdirname (B[0;1m[33m"${BASH_SOURCE[0]}"(B[0m[32m)[39m(B[m/../tofu/environments/hetzner/(B[0;1m[31m${ENV}[33m" && pwd)"[8d[34mcd[39m(B[m (B[0;1m[33m"$ROOT"[10d[34mecho[39m(B[m (B[0;1m[33m"‚Üí Decrypting secrets..."[11d[39m(B[mHETZNER_TOKEN[32m=(B[0;1m[33m"$(SOPS_AGE_KEY_FILE="[31m$HOME[39m(B[m/.secrets/age.key" [32m\[12;3H[39m(B[msops(B[0;1m[35m --decrypt --extract[39m(B[m (B[0;1m[33m'["hcloud_token"]'[39m(B[m hetzner.enc.yaml[32m)[39m(B[m"[13d[32mexport[39m(B[m HCLOUD_TOKEN[32m=(B[0;1m[33m"$HETZNER_TOKEN"[15d[34mecho[39m(B[m (B[0;1m[33m"HCLOUD_TOKEN is set: ${HCLOUD_TOKEN:0:4}‚Ä¶"[17d[34mecho[39m(B[m (B[0;1m[33m"‚Üí Initializing OpenTofu..."[18d[39m(B[mtofu init -input[32m=[39m(B[mfalse[20d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Running plan..."[21d[39m(B[mtofu plan -out[32m=[39m(B[mtfplan[23d[32mif[39m(B[m [32m[[[39m(B[m (B[0;1m[33m"${APPLY:-false}"[39m(B[m [32m==[39m(B[m (B[0;1m[33m"true"[39m(B[m [32m]];[39m(B[m [32mthen[24;3H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Applying..."[25;3H[39m(B[mtofu apply -auto-approve tfplan[26d[32melse[27d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Plan created: tfplan. Use APPLY=true to apply."[28d(B[0m[32mfi[2d[39m(B[m[?12l[?25h[?25l[?12l[?25h[?25l[1;57H(B[0;7m*[90G(B[m[2;44r[44;1H
[1;46r[43;1H[K[2d[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[K[?12l[?25h[?25l[44;37H(B[0;7m[ Nothing was cut ](B[m[?12l[?25h[2d[?25l[44;56H[?12l[?25h[2d[?25l[44;56H[?12l[?25h[2d[?25l[44;56H[?12l[?25h[2d[?25l[44;56H[?12l[?25h[2d[?25l[44;56H[?12l[?25h[2d[?25l[36m#!/usr/bin/env bash[3d(B[0;1m[34mset[39m(B[m -euo pipefail[4dtrap (B[0;1m[33m'echo "Error on line $LINENO"; exit 1'[39m(B[m ERR[6dENV[32m=(B[0;1m[33m"${1:-dev}"[7d[39m(B[mROOT[32m=(B[0;1m[33m"$(cd "(B[0m[32m$([39m(B[mdirname (B[0;1m[33m"${BASH_SOURCE[0]}"(B[0m[32m)[39m(B[m/../tofu/environments/hetzner/(B[0;1m[31m${ENV}[33m" && pwd)"[8d[34mcd[39m(B[m (B[0;1m[33m"$ROOT"[10d[34mecho[39m(B[m (B[0;1m[33m"‚Üí Decrypting secrets..."[11d[39m(B[mHETZNER_TOKEN[32m=(B[0;1m[33m"$(SOPS_AGE_KEY_FILE="[31m$HOME[39m(B[m/.secrets/age.key" [32m\[12;3H[39m(B[msops(B[0;1m[35m --decrypt --extract[39m(B[m (B[0;1m[33m'["hcloud_token"]'[39m(B[m hetzner.enc.yaml[32m)[39m(B[m"[13d[32mexport[39m(B[m HCLOUD_TOKEN[32m=(B[0;1m[33m"$HETZNER_TOKEN"[15d[34mecho[39m(B[m (B[0;1m[33m"HCLOUD_TOKEN is set: ${HCLOUD_TOKEN:0:4}‚Ä¶"[17d[34mecho[39m(B[m (B[0;1m[33m"‚Üí Initializing OpenTofu..."[18d[39m(B[mtofu init -input[32m=[39m(B[mfalse[20d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Running plan..."[21d[39m(B[mtofu plan -out[32m=[39m(B[mtfplan[23d[32mif[39m(B[m [32m[[[39m(B[m (B[0;1m[33m"${APPLY:-false}"[39m(B[m [32m==[39m(B[m (B[0;1m[33m"true"[39m(B[m [32m]];[39m(B[m [32mthen[24;3H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Applying..."[25;3H[39m(B[mtofu apply -auto-approve tfplan[26;3H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚úÖ Apply complete!"[27d(B[0m[32melse[28d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Plan created: tfplan. Use APPLY=true to apply."[29d(B[0m[32mfi[44d[39m(B[m[K[30d[?12l[?25h[?25l[45;16H       (B[0;7mM-D(B[m DOS Format        (B[0;7mM-A(B[m Append[61G      (B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[16G       (B[0;7mM-M(B[m Mac Format        (B[0;7mM-P(B[m Prefix[61G      (B[0;7m^T(B[m Browse[K[44d(B[0;7mFile Name to Write: load-secrets.sh                                                        [44;36H(B[m[?12l[?25h[?25l  [1K (B[0;7m[ Writing... ](B[m[K[1;57H(B[0;7m [90G(B[m[44;37H(B[0;7m[ Wrote 28 lines ](B[m[45;16H(B[0;7m^O(B[m Write Out   (B[0;7m^W(B[m Where Is    (B[0;7m^K(B[m Cut   [61G(B[0;7m^T(B[m Execute     (B[0;7m^C(B[m Location[46;2H(B[0;7mX(B[m Exit  [16G(B[0;7m^R(B[m Read File   (B[0;7m^\(B[m Replace     (B[0;7m^U(B[m Paste [61G(B[0;7m^J(B[m Justify     (B[0;7m^/(B[m Go To Line[?12l[?25h[30d[?25l[44d[J[46d[?12l[?25h[46;1H[?1049l[23;0;0t[?1l>[?2004l[1m[7m%[27m[1m[0m                                                                                           ]2;chrisanich@anichlabs:/lab/px/cloud-native-infra/scripts]1;..infra/scripts]7;file:///lab/px/cloud-native-infra/scripts\[0m[27m[24m[J[01;32m‚ûú  [36mscripts[00m [01;34mgit:([31mmain[34m) [33m‚úó[00m [K[?1h=[?2004hcclear   c  ../.  nano load-secrets.sh[20Dls                  [18Dclearscripts tofu apply tfplan[17Dclear            [12Ddev  tofu apply "tfplan"[8Dtfplan  [17D./load-secrets.sh[17Dls               [15Dclear./clean.sh[?1l>[?2004l
]2;./clean.sh]1;./clean.sh‚Üí Cleaning Terraform/OpenTofu local caches in /lab/px/cloud-native-infra...
‚ö†Ô∏è  This will delete all .terraform/ and tfplan files. State files will be preserved. Continue? [y/N] y
‚úî Clean complete. State files (.tfstate) and lockfiles (.lock.hcl) preserved.
[1m[7m%[27m[1m[0m                                                                                           ]2;chrisanich@anichlabs:/lab/px/cloud-native-infra/scripts]1;..infra/scripts]7;file:///lab/px/cloud-native-infra/scripts\[0m[27m[24m[J[01;32m‚ûú  [36mscripts[00m [01;34mgit:([31mmain[34m) [33m‚úó[00m [K[?1h=[?2004hcclear   c  ./clean.sh[10Dnano load-secrets.sh[20Dls                  [18Dclearscripts tofu apply tfplan[17Dclear            [12Ddev  tofu apply "tfplan"[8Dtfplan  [17D./load-secrets.sh               .  lsclear./clean.sh[10Dls        [8Dclearrals   scriptsclear  scriptsls     cleraarls   ./clean.sh[10Dclear     ls   tofu apply tfplan"tfplan"[19Ddev                [16Dcleartofu apply tfplan[17Dscript           [11Dsclear  ls   nano load-secrets.sh[20D./clean.sh          [10D[10D          [10D./clean.sh[10Dnano load-secrets.sh[?1l>[?2004l
]2;nano load-secrets.sh]1;nano[?2004h[?1049h[22;0;0t[1;46r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[44;39H(B[0;7m[ Reading... ](B[m[44;38H(B[0;7m[ Read 28 lines ](B[m[H(B[0;7m  GNU nano 7.2                          load-secrets.sh                                    [1;90H(B[m[45d(B[0;7m^G(B[m Help[45;16H(B[0;7m^O(B[m Write Out   (B[0;7m^W(B[m Where Is    (B[0;7m^K(B[m Cut[45;61H(B[0;7m^T(B[m Execute     (B[0;7m^C(B[m Location[46d(B[0;7m^X(B[m Exit[46;16H(B[0;7m^R(B[m Read File   (B[0;7m^\(B[m Replace     (B[0;7m^U(B[m Paste[61G(B[0;7m^J(B[m Justify     (B[0;7m^/(B[m Go To Line[2d[36m#!/usr/bin/env bash[3d(B[0;1m[34mset[39m(B[m -euo pipefail[4dtrap (B[0;1m[33m'echo "Error on line $LINENO"; exit 1'[39m(B[m ERR[6dENV[32m=(B[0;1m[33m"${1:-dev}"[7d[39m(B[mROOT[32m=(B[0;1m[33m"$(cd "(B[0m[32m$([39m(B[mdirname (B[0;1m[33m"${BASH_SOURCE[0]}"(B[0m[32m)[39m(B[m/../tofu/environments/hetzner/(B[0;1m[31m${ENV}[33m" && pwd)"[8d[34mcd[39m(B[m (B[0;1m[33m"$ROOT"[10d[34mecho[39m(B[m (B[0;1m[33m"‚Üí Decrypting secrets..."[11d[39m(B[mHETZNER_TOKEN[32m=(B[0;1m[33m"$(SOPS_AGE_KEY_FILE="[31m$HOME[39m(B[m/.secrets/age.key" [32m\[12;3H[39m(B[msops(B[0;1m[35m --decrypt --extract[39m(B[m (B[0;1m[33m'["hcloud_token"]'[39m(B[m hetzner.enc.yaml[32m)[39m(B[m"[13d[32mexport[39m(B[m HCLOUD_TOKEN[32m=(B[0;1m[33m"$HETZNER_TOKEN"[15d[34mecho[39m(B[m (B[0;1m[33m"HCLOUD_TOKEN is set: ${HCLOUD_TOKEN:0:4}‚Ä¶"[17d[34mecho[39m(B[m (B[0;1m[33m"‚Üí Initializing OpenTofu..."[18d[39m(B[mtofu init -input[32m=[39m(B[mfalse[20d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Running plan..."[21d[39m(B[mtofu plan -out[32m=[39m(B[mtfplan[23d[32mif[39m(B[m [32m[[[39m(B[m (B[0;1m[33m"${APPLY:-false}"[39m(B[m [32m==[39m(B[m (B[0;1m[33m"true"[39m(B[m [32m]];[39m(B[m [32mthen[24;3H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Applying..."[25;3H[39m(B[mtofu apply -auto-approve tfplan[26;3H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚úÖ Apply complete!"[27d(B[0m[32melse[28d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Plan created: tfplan. Use APPLY=true to apply."[29d(B[0m[32mfi[2d[39m(B[m[?12l[?25h[?25l[1;57H(B[0;7m*[90G(B[m[2;44r[44;1H
[1;46r[43;1H[K[2d[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[2;44r[44;1H
[1;46r[2;1H[?12l[?25h[?25l[K[?12l[?25h[?25l[44;37H(B[0;7m[ Nothing was cut ](B[m[?12l[?25h[2d[?25l[44;56H[?12l[?25h[2d[?25l[44;56H[?12l[?25h[2d[?25l[44;56H[?12l[?25h[2d[?25l[44;56H[?12l[?25h[2d[?25l[44;56H[?12l[?25h[2d[?25l[44;56H[?12l[?25h[2d[?25l[44;56H[?12l[?25h[2d[?25l[44;56H[?12l[?25h[2d[?25l[36m#!/usr/bin/env bash[3d(B[0;1m[34mset[39m(B[m -euo pipefail[4dtrap (B[0;1m[33m'echo "Error on line $LINENO"; exit 1'[39m(B[m ERR[6dENV[32m=(B[0;1m[33m"${1:-dev}"[7d[39m(B[mROOT[32m=(B[0;1m[33m"$(cd "(B[0m[32m$([39m(B[mdirname (B[0;1m[33m"${BASH_SOURCE[0]}"(B[0m[32m)[39m(B[m/../tofu/environments/hetzner/(B[0;1m[31m${ENV}[33m" && pwd)"[8d[34mcd[39m(B[m (B[0;1m[33m"$ROOT"[10d[34mecho[39m(B[m (B[0;1m[33m"‚Üí Decrypting secrets..."[11d[39m(B[mHETZNER_TOKEN[32m=(B[0;1m[33m"$(SOPS_AGE_KEY_FILE="[31m$HOME[39m(B[m/.secrets/age.key" [32m\[12;3H[39m(B[msops(B[0;1m[35m --decrypt --extract[39m(B[m (B[0;1m[33m'["hcloud_token"]'[39m(B[m hetzner.enc.yaml[32m)[39m(B[m"[13d[32mexport[39m(B[m HCLOUD_TOKEN[32m=(B[0;1m[33m"$HETZNER_TOKEN"[15d[34mecho[39m(B[m (B[0;1m[33m"HCLOUD_TOKEN is set: ${HCLOUD_TOKEN:0:4}‚Ä¶"[17d[34mecho[39m(B[m (B[0;1m[33m"‚Üí Initializing OpenTofu..."[18d[39m(B[mtofu init -input[32m=[39m(B[mfalse[20d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Running plan..."[21d[39m(B[mtofu plan -out[32m=[39m(B[mtfplan[23d[32mif[39m(B[m [32m[[[39m(B[m (B[0;1m[33m"${APPLY:-false}"[39m(B[m [32m==[39m(B[m (B[0;1m[33m"true"[39m(B[m [32m]];[39m(B[m [32mthen[24;3H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Applying..."[25;3H[39m(B[mtofu apply -auto-approve tfplan[26;3H(B[0;1m[34mrm[35m -f[39m(B[m tfplan[27;3H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚úÖ Apply complete! (tfplan removed)"[28d(B[0m[32melse[29d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Plan created: tfplan. Use APPLY=true to apply."[30d(B[0m[32mfi[44d[39m(B[m[K[31d[?12l[?25h[?25l[45;16H       (B[0;7mM-D(B[m DOS Format        (B[0;7mM-A(B[m Append[61G      (B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[16G       (B[0;7mM-M(B[m Mac Format        (B[0;7mM-P(B[m Prefix[61G      (B[0;7m^T(B[m Browse[K[44d(B[0;7mFile Name to Write: load-secrets.sh                                                        [44;36H(B[m[?12l[?25h[?25l  [1K (B[0;7m[ Writing... ](B[m[K[1;57H(B[0;7m [90G(B[m[44;37H(B[0;7m[ Wrote 29 lines ](B[m[45;16H(B[0;7m^O(B[m Write Out   (B[0;7m^W(B[m Where Is    (B[0;7m^K(B[m Cut   [61G(B[0;7m^T(B[m Execute     (B[0;7m^C(B[m Location[46;2H(B[0;7mX(B[m Exit  [16G(B[0;7m^R(B[m Read File   (B[0;7m^\(B[m Replace     (B[0;7m^U(B[m Paste [61G(B[0;7m^J(B[m Justify     (B[0;7m^/(B[m Go To Line[?12l[?25h[31d[?25l[44d[J[46d[?12l[?25h[46;1H[?1049l[23;0;0t[?1l>[?2004l[1m[7m%[27m[1m[0m                                                                                           ]2;chrisanich@anichlabs:/lab/px/cloud-native-infra/scripts]1;..infra/scripts]7;file:///lab/px/cloud-native-infra/scripts\[0m[27m[24m[J[01;32m‚ûú  [36mscripts[00m [01;34mgit:([31mmain[34m) [33m‚úó[00m [K[?1h=[?2004hnano load-secrets.sh[20D./clean.sh          [10D[10Dnano load-secrets.sh[20Dls                  [18Dclearscripts tofu apply tfplan[17Dclear            [12Ddev  tofu apply "tfplan"[8Dtfplan  [17D./load-secrets.sh[?1l>[?2004l
]2;./load-secrets.sh]1;./load-secrets.sh‚Üí Decrypting secrets...
HCLOUD_TOKEN is set: 7fJE‚Ä¶
‚Üí Initializing OpenTofu...

[0m[1mInitializing the backend...[0m
[0m[1mInitializing modules...[0m
- core_network in ../../../modules/core-network

[0m[1mInitializing provider plugins...[0m
- Reusing previous version of hetznercloud/hcloud from the dependency lock file
- Installing hetznercloud/hcloud v1.52.0...
- Installed hetznercloud/hcloud v1.52.0 (signed, key ID [0m[1m5219EACB3A77198B[0m[0m)

Providers are signed by their developers.
If you'd like to know more about provider signing, you can read about it here:
https://opentofu.org/docs/cli/plugins/signing/

[0m[1m[32mOpenTofu has been successfully initialized![0m[32m[0m
[0m[32m
You may now begin working with OpenTofu. Try running "tofu plan" to see
any changes that are required for your infrastructure. All OpenTofu commands
should now work.

If you ever set or change modules or backend configuration for OpenTofu,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.[0m
‚Üí Running plan...
[0m[1mmodule.core_network.hcloud_network.main: Refreshing state... [id=11384527][0m

[0m[1m[32mNo changes.[0m[1m Your infrastructure matches the configuration.[0m

[0mOpenTofu has compared your real infrastructure against your configuration and found no
differences, so no changes are needed.
‚Üí Plan created: tfplan. Use APPLY=true to apply.
[1m[7m%[27m[1m[0m                                                                                           ]2;chrisanich@anichlabs:/lab/px/cloud-native-infra/scripts]1;..infra/scripts]7;file:///lab/px/cloud-native-infra/scripts\[0m[27m[24m[J[01;32m‚ûú  [36mscripts[00m [01;34mgit:([31mmain[34m) [33m‚úó[00m [K[?1h=[?2004h./load-secrets.sh[17Dnano load-secrets.sh[?1l>[?2004l
]2;nano load-secrets.sh]1;nano[?2004h[?1049h[22;0;0t[1;46r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[44;39H(B[0;7m[ Reading... ](B[m[44;38H(B[0;7m[ Read 29 lines ](B[m[H(B[0;7m  GNU nano 7.2                          load-secrets.sh                                    [1;90H(B[m[45d(B[0;7m^G(B[m Help[45;16H(B[0;7m^O(B[m Write Out   (B[0;7m^W(B[m Where Is    (B[0;7m^K(B[m Cut[45;61H(B[0;7m^T(B[m Execute     (B[0;7m^C(B[m Location[46d(B[0;7m^X(B[m Exit[46;16H(B[0;7m^R(B[m Read File   (B[0;7m^\(B[m Replace     (B[0;7m^U(B[m Paste[61G(B[0;7m^J(B[m Justify     (B[0;7m^/(B[m Go To Line[2d[36m#!/usr/bin/env bash[3d(B[0;1m[34mset[39m(B[m -euo pipefail[4dtrap (B[0;1m[33m'echo "Error on line $LINENO"; exit 1'[39m(B[m ERR[6dENV[32m=(B[0;1m[33m"${1:-dev}"[7d[39m(B[mROOT[32m=(B[0;1m[33m"$(cd "(B[0m[32m$([39m(B[mdirname (B[0;1m[33m"${BASH_SOURCE[0]}"(B[0m[32m)[39m(B[m/../tofu/environments/hetzner/(B[0;1m[31m${ENV}[33m" && pwd)"[8d[34mcd[39m(B[m (B[0;1m[33m"$ROOT"[10d[34mecho[39m(B[m (B[0;1m[33m"‚Üí Decrypting secrets..."[11d[39m(B[mHETZNER_TOKEN[32m=(B[0;1m[33m"$(SOPS_AGE_KEY_FILE="[31m$HOME[39m(B[m/.secrets/age.key" [32m\[12;3H[39m(B[msops(B[0;1m[35m --decrypt --extract[39m(B[m (B[0;1m[33m'["hcloud_token"]'[39m(B[m hetzner.enc.yaml[32m)[39m(B[m"[13d[32mexport[39m(B[m HCLOUD_TOKEN[32m=(B[0;1m[33m"$HETZNER_TOKEN"[15d[34mecho[39m(B[m (B[0;1m[33m"HCLOUD_TOKEN is set: ${HCLOUD_TOKEN:0:4}‚Ä¶"[17d[34mecho[39m(B[m (B[0;1m[33m"‚Üí Initializing OpenTofu..."[18d[39m(B[mtofu init -input[32m=[39m(B[mfalse[20d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Running plan..."[21d[39m(B[mtofu plan -out[32m=[39m(B[mtfplan[23d[32mif[39m(B[m [32m[[[39m(B[m (B[0;1m[33m"${APPLY:-false}"[39m(B[m [32m==[39m(B[m (B[0;1m[33m"true"[39m(B[m [32m]];[39m(B[m [32mthen[24;3H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Applying..."[25;3H[39m(B[mtofu apply -auto-approve tfplan[26;3H(B[0;1m[34mrm[35m -f[39m(B[m tfplan[27;3H(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚úÖ Apply complete! (tfplan removed)"[28d(B[0m[32melse[29d(B[0;1m[34mecho[39m(B[m (B[0;1m[33m"‚Üí Plan created: tfplan. Use APPLY=true to apply."[30d(B[0m[32mfi[2d[39m(B[m[?12l[?25h[?25l[45;16H       (B[0;7mM-D(B[m DOS Format        (B[0;7mM-A(B[m Append[61G      (B[0;7mM-B(B[m Backup File[K[46;2H(B[0;7mC(B[m Cancel[16G       (B[0;7mM-M(B[m Mac Format        (B[0;7mM-P(B[m Prefix[61G      (B[0;7m^T(B[m Browse[K[44d(B[0;7mFile Name to Write: load-secrets.sh                                                        [44;36H(B[m[?12l[?25h[?25l  [1K (B[0;7m[ Writing... ](B[m[K[1;90H[44;37H(B[0;7m[ Wrote 29 lines ](B[m[45;16H(B[0;7m^O(B[m Write Out   (B[0;7m^W(B[m Where Is    (B[0;7m^K(B[m Cut   [61G(B[0;7m^T(B[m Execute     (B[0;7m^C(B[m Location[46;2H(B[0;7mX(B[m Exit  [16G(B[0;7m^R(B[m Read File   (B[0;7m^\(B[m Replace     (B[0;7m^U(B[m Paste [61G(B[0;7m^J(B[m Justify     (B[0;7m^/(B[m Go To Line[?12l[?25h[2d[?25l[44d[J[46d[?12l[?25h[46;1H[?1049l[23;0;0t[?1l>[?2004l[1m[7m%[27m[1m[0m                                                                                           ]2;chrisanich@anichlabs:/lab/px/cloud-native-infra/scripts]1;..infra/scripts]7;file:///lab/px/cloud-native-infra/scripts\[0m[27m[24m[J[01;32m‚ûú  [36mscripts[00m [01;34mgit:([31mmain[34m) [33m‚úó[00m [K[?1h=[?2004hcclear[?1l>[?2004l
]2;clear]1;clear[H[2J[3J[1m[7m%[27m[1m[0m                                                                                           ]2;chrisanich@anichlabs:/lab/px/cloud-native-infra/scripts]1;..infra/scripts]7;file:///lab/px/cloud-native-infra/scripts\[0m[27m[24m[J[01;32m‚ûú  [36mscripts[00m [01;34mgit:([31mmain[34m) [33m‚úó[00m [K[?1h=[?2004hclearsource ~/.zshenv[16Dnano[P[P[10C  [14Dcd            [12Dclearnano .gitignore[15Dcat[P[11C [14Dcloud         [9Dnano load-secrets.sh[20D./l[3P[14C   [17Dnano load-secrets.sh[20D./l[3P[14C   [17Dnano load-secrets.sh[20D./clean.sh          [10D[?1l>[?2004l
]2;./clean.sh]1;./clean.sh‚Üí Cleaning Terraform/OpenTofu local caches in /lab/px/cloud-native-infra...
‚ö†Ô∏è  This will delete all .terraform/ and tfplan files. State files will be preserved. Continue? [y/N] t y
‚úî Clean complete. State files (.tfstate) and lock